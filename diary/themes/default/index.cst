<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="ja">
  <head profile="http://gmpg.org/xfn/11">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
      <?cs if:entry.title ?>
      <?cs var:html_escape(entry.title + " - " + diary.title) ?>
      <?cs else ?>
      <?cs var:html_escape(diary.title) ?>
      <?cs /if ?>
    </title>
    <link rel="stylesheet" type="text/css"
          href="<?cs var:diary.uri ?>themes/default/style.css" />
    <link rel="alternate" type="application/rss+xml" title="RSS 2.0"
          href="<?cs var:diary.uri ?>feed/" />
    <meta name="generator" content="mod_diary" />
  </head>
  <body class="home blog">
    <div id="page">
      <div id="header" role="banner">
        <div id="headerimg">
          <h1 class="title">
            <a href="<?cs var:diary.uri ?>">
              <?cs var:html_escape(diary.title) ?>
            </a>
          </h1>
          <div class="description">Just another mod_diary site</div>
        </div>
      </div>
      <hr />
      <div id="content" class="narrowcolumn" role="main">
        <?cs if:index ?>
        <?cs each:item = index ?>
        <div class="post">
          <h2 class="entry-title">
            <a href="<?cs var:diary.uri + item.name ?>"
               title="<?cs var:html_escape(item.title) ?>">
              <?cs var:html_escape(item.title) ?>
            </a>
          </h2>
          <div class="entry">
          </div>
        </div>
        <?cs /each ?>
        <?cs else ?>
        <div class="post">
          <h2 class="entry-title">
            <a href="<?cs var:entry.uri ?>"
               title="<?cs var:html_escape(entry.title) ?>">
              <?cs var:html_escape(entry.title) ?>
            </a>
          </h2>
          <small><?cs var:entry.date ?></small>
          <?cs if:entry.author ?>
          <small> - <?cs var:html_escape(entry.author) ?></small>
          <?cs /if ?>
          <div class="entry-content">
            <?cs var:entry.desc ?>
          </div>
        </div>
        <?cs /if ?>

        <div class="navigation">
          <div class="alignleft"></div>
          <div class="alignright"></div>
        </div>
      </div>

      <div id="sidebar" role="complementary">
        <ul>
          <li id="search">
            <form role="search" method="get" id="searchform"
                  action="http://www.google.co.jp/search" >
              <div><label class="screen-reader-text" for="s">Search:</label>
                <input type="text" value="" name="q" id="s" />
                <input type="submit" id="searchsubmit" value="Search" />
                <input type="hidden" name="hl" value="ja" />
                <input type="hidden" name="as_sitesearch"
                       value="<?cs var:diary.uri ?>" />
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="hidden" name="oe" value="UTF-8" />
              </div>
            </form>
          </li>
          <li id="recent-posts">
            <h2 class="widgettitle">Recent Entry</h2><ul>
              <?cs each:item = index ?>
              <li>
                <a href="<?cs var:diary.uri + item.name ?>"
                   title="<?cs var:html_escape(item.title) ?>">
                  <?cs var:html_escape(item.title) ?>
                </a>
              </li>
              <?cs /each ?>
            </ul>
          </li>
          <li>
<?cs # [calendar]                                                     ?> 
<?cs # -------------------------------------------------------------- ?>
<?cs # macros                                                         ?>
<?cs # -------------------------------------------------------------- ?>
<?cs def:decorate_day(html, base_uri, entries, y, m, d) ?><?cs 
  set:entry_name = y + "-" + m + "-" ?><?cs 
  if:d < 10 ?><?cs 
    set:entry_name = entry_name + "0" + d ?><?cs 
  else ?><?cs 
    set:entry_name = entry_name + d ?><?cs 
  /if ?><?cs 
  set:html = "" ?><?cs   
  each:entry = entries ?><?cs 
    var:entry
    ?><?cs 
    if:entry.name == entry_name ?><?cs 
      set:html = "<a href='" + base_uri + "/" + entry_name + "'>" + d + "</a>" ?><?cs
    /if ?><?cs 
  /each ?><?cs 
  if:!html ?><?cs 
    set:html = d ?><?cs 
  /if ?><?cs 
/def ?>

<?cs def:output_day(lastdayofmon, dow_1stdayofmon, idx, offset, y, m, entries, color) ?><?cs 
  set:html = "" ?><?cs 
  if:(idx - dow_1stdayofmon + offset > 0) && (idx <= lastdayofmon) ?><?cs 
    call:decorate_day(html, diary.uri, entries, y, m, (idx - dow_1stdayofmon + offset)) ?><?cs 
  /if ?>
  <td><span style='color:<?cs alt:color ?>inherit<?cs /alt ?>'><?cs var:html ?></span></td><?cs 
/def ?>
<?cs # -------------------------------------------------------------- ?>
<?cs # markups                                                        ?>
<?cs # -------------------------------------------------------------- ?>
<table style="float:left; width:150px; text-align:center">
<tbody>
<tr style="background:#aaaaff">
 <th><?cs if:?cal.prev_month_url ?><a href="<?cs var:cal.prev_month_url ?>">«</a><?cs else ?>&nbsp;<?cs /if ?></th>
 <th colspan="5"><?cs var:cal.year ?>年<?cs var:cal.month ?>月</th>
 <th><?cs if:?cal.next_month_url ?><a href="<?cs var:cal.next_month_url ?>">»</a><?cs else ?>&nbsp;<?cs /if ?></th>
</tr>
<tr style="background:#eeeeff">
 <td><span style="color:red">日</span></td><td>月</td><td>火</td><td>水</td><td>木</td><td>金</td><td><span style="color:deepskyblue">土</span></td>
</tr><?cs 
loop:i  = #0, #41, #7 ?><?cs 
 if:i == #0 ?><tr><?cs 
 /if ?><?cs 
 call:output_day(cal.lastdayofmonth, cal.dayofweek_1stdayofmonth, i, #1, cal.year, cal.month, index, "red") ?><?cs 
 call:output_day(cal.lastdayofmonth, cal.dayofweek_1stdayofmonth, i, #2, cal.year, cal.month, index, "") ?><?cs 
 call:output_day(cal.lastdayofmonth, cal.dayofweek_1stdayofmonth, i, #3, cal.year, cal.month, index, "") ?><?cs 
 call:output_day(cal.lastdayofmonth, cal.dayofweek_1stdayofmonth, i, #4, cal.year, cal.month, index, "") ?><?cs 
 call:output_day(cal.lastdayofmonth, cal.dayofweek_1stdayofmonth, i, #5, cal.year, cal.month, index, "") ?><?cs 
 call:output_day(cal.lastdayofmonth, cal.dayofweek_1stdayofmonth, i, #6, cal.year, cal.month, index, "") ?><?cs 
 call:output_day(cal.lastdayofmonth, cal.dayofweek_1stdayofmonth, i, #7, cal.year, cal.month, index, "deepskyblue") ?><?cs 
 if:(i%#7==0) && (i!=#35) ?>
 </tr>
 <tr><?cs 
 elif:(i%#7==0) && (i==#35) ?>
 </tr><?cs 
 /if ?><?cs 
/loop ?>
</tbody>
</table>
<?cs # [/calendar] ?>
          
          </li>
        </ul>
      </div>
      <hr />
      <div id="footer" role="contentinfo">
        <p>
          <?cs var:diary.title ?> is proudly powered by
          <a href="https://github.com/hamano/apache-mod-diary">mod_diary</a>
        </p>
      </div>
    </div>
  </body>
</html>
